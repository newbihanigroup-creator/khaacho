# ============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to configure your production environment on Render
# Most values will be automatically set by Render from render.yaml

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
NODE_ENV=production
PORT=10000
API_VERSION=v1

# ============================================================================
# DATABASE (Automatically set by Render from managed PostgreSQL)
# ============================================================================
DATABASE_URL=postgresql://user:password@host:port/database?schema=public&connection_limit=20&pool_timeout=10

# Database Pool Configuration
DB_POOL_MIN=10
DB_POOL_MAX=50
DB_CONNECTION_TIMEOUT=10000
DB_STATEMENT_TIMEOUT=30000
DB_IDLE_TIMEOUT=60000

# ============================================================================
# REDIS (Automatically set by Render from managed Redis)
# ============================================================================
REDIS_URL=redis://host:port
# Or individual settings:
# REDIS_HOST=your-redis-host
# REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password
# REDIS_DB=0

# ============================================================================
# JWT AUTHENTICATION (Generate secure secret)
# ============================================================================
JWT_SECRET=your-super-secret-jwt-key-change-in-production-use-long-random-string
JWT_EXPIRES_IN=7d

# ============================================================================
# WHATSAPP BUSINESS API (Required)
# ============================================================================
WHATSAPP_API_URL=https://graph.facebook.com/v18.0
WHATSAPP_PHONE_NUMBER_ID=your-phone-number-id
WHATSAPP_ACCESS_TOKEN=your-whatsapp-access-token
WHATSAPP_VERIFY_TOKEN=your-webhook-verify-token
WHATSAPP_ASYNC=true

# ============================================================================
# SECURITY & RATE LIMITING
# ============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=info
LOG_MAX_FILES=30d
LOG_MAX_SIZE=50m

# ============================================================================
# PERFORMANCE & FEATURES
# ============================================================================
ENABLE_METRICS=true
METRICS_INTERVAL=60000

# Background Jobs (true for worker service, false for web service)
ENABLE_BACKGROUND_JOBS=false
ASYNC_NOTIFICATIONS=true

# ============================================================================
# MONITORING THRESHOLDS
# ============================================================================
MONITORING_ORDER_RATE_THRESHOLD=100
MONITORING_JOB_FAILURE_THRESHOLD=10
MONITORING_WHATSAPP_FAILURE_THRESHOLD=20
MONITORING_API_ERROR_THRESHOLD=5
MONITORING_DB_LATENCY_THRESHOLD=1000
MONITORING_CPU_THRESHOLD=80
MONITORING_MEMORY_THRESHOLD=80
MONITORING_DISK_THRESHOLD=85

# ============================================================================
# ALERT CONFIGURATION
# ============================================================================
MONITORING_ALERT_COOLDOWN=300000
MONITORING_ENABLE_EMAIL_ALERTS=true
MONITORING_ENABLE_SMS_ALERTS=false
MONITORING_ENABLE_WEBHOOK_ALERTS=false
MONITORING_ALERT_WEBHOOK_URL=

# ============================================================================
# NOTIFICATION CHANNELS
# ============================================================================
ALERT_EMAIL_FROM=alerts@khaacho.com
ALERT_EMAIL_TO=admin@khaacho.com
ALERT_SMS_PHONE=

# ============================================================================
# CORS CONFIGURATION (Optional - customize allowed origins)
# ============================================================================
# CORS_ORIGIN=https://yourdomain.com,https://admin.yourdomain.com

# ============================================================================
# OPTIONAL: Email Configuration (for alerts)
# ============================================================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password

# ============================================================================
# OPTIONAL: SMS Configuration (for alerts)
# ============================================================================
# SMS_PROVIDER=twilio
# TWILIO_ACCOUNT_SID=your-account-sid
# TWILIO_AUTH_TOKEN=your-auth-token
# TWILIO_PHONE_NUMBER=+1234567890

# ============================================================================
# IMAGE UPLOAD & PROCESSING
# ============================================================================
# Google Cloud Storage (recommended - private files with signed URLs)
GCS_BUCKET_NAME=khaacho-uploads
GCS_PROJECT_ID=your-project-id
GCS_CREDENTIALS={"type":"service_account","project_id":"...","private_key":"...","client_email":"..."}
# Or use key file path (if deploying with file):
# GCS_KEY_FILE=/etc/secrets/gcs-key.json

# Google Vision API (for OCR text extraction)
GOOGLE_CLOUD_PROJECT_ID=your-project-id
GOOGLE_CLOUD_CREDENTIALS={"type":"service_account","project_id":"...","private_key":"...","client_email":"..."}

# LLM Configuration (for order item extraction)
LLM_PROVIDER=openai
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-4o-mini

# Alternative LLM Providers (optional)
# ANTHROPIC_API_KEY=sk-ant-...
# ANTHROPIC_MODEL=claude-3-haiku-20240307
# GEMINI_API_KEY=...
# GEMINI_MODEL=gemini-pro

# Product Matching Configuration
PRODUCT_MATCH_THRESHOLD=0.7
